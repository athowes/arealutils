package_name <- "arealutils"

TMBtools::tmb_create_package(
  path = package_name,
  example_code = TRUE,
  fields = list(
  `Authors@R` = 'person("Your", "Name", email = "valid@email.com", role = c("aut", "cre"))')
)

# R wrapper functions to TMB models
usethis::use_template(
  template = "norm_ADFun.R",
  package = "TMBtools",
  save_as = file.path("R", "norm_ADFun.R"),
  data = list(pkg = package_name)
)

usethis::use_template(
  template = "gamma_ADFun.R",
  package = "TMBtools",
  save_as = file.path("R", "gamma_ADFun.R"),
  data = list(pkg = package_name)
)

# testthat tests
usethis::use_testthat()

usethis::use_package(package = "numDeriv", type = "Suggests")

usethis::use_template(
  template = "test-norm_ADFun.R",
  package = "TMBtools",
  save_as = file.path("tests", "testthat", "test-norm_ADFun.R")
)

usethis::use_template(
  template = "test-gamma_ADFun.R",
  package = "TMBtools",
  save_as = file.path("tests", "testthat", "test-gamma_ADFun.R")
)

# update NAMESPACE and package documentation
pkgbuild::compile_dll() # need to compile src first
devtools::document()

rstantools::use_rstan(pkgdir = ".", license = TRUE, auto_config = TRUE)
rstantools::rstan_config(pkgdir = ".")
